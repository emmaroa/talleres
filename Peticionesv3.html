<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro Petición de Refacciones</title>
  <style>
    /* ====== Variables de color y diseño ====== */
    :root{
      --bg: #f8f6f2;
      --card: #ffffff;
      --text: #2e2e2e;
      --muted: #6b7280;

      --brand: #ff7f11;        /* Naranja institucional */
      --brand-600: #e66e0a;
      --accent: #10c6d1;       /* Turquesa acento */
      --accent-700: #0ea5b0;

      --ring: rgba(16,198,209,.45); /* turquesa */
      --ring-strong: rgba(255,127,17,.35); /* naranja */

      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --shadow-strong: 0 16px 40px rgba(0,0,0,.12);
    }

    /* ====== Reset mínimo ====== */
    *{ box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 110% -10%, rgba(16,198,209,.10), transparent 60%),
        radial-gradient(900px 500px at -10% 110%, rgba(255,127,17,.10), transparent 60%),
        var(--bg);
    }

    /* ====== Header ====== */
    header{
      background: linear-gradient(135deg, var(--brand) 0%, var(--accent) 100%);
      color: white;
      padding: 24px 16px;
      position: sticky; top:0; z-index: 10;
      box-shadow: var(--shadow);
    }
    .header-wrap{
      max-width: 980px; margin: 0 auto;
      display: flex; align-items: center; gap: 14px;
    }
    .logo{
      width: 56px; height: 56px; border-radius: 12px;
      background: rgba(255,255,255,.15);
      display: grid; place-items: center;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.25);
      overflow: hidden;
    }
    .logo img{ width: 44px; height: auto; filter: drop-shadow(0 2px 2px rgba(0,0,0,.15)); }
    .title-group h1{
      margin:0; font-size: clamp(1.15rem, 2.2vw, 1.5rem); font-weight: 800;
      letter-spacing:.3px;
    }
    .title-group p{
      margin:.2rem 0 0; opacity:.95; font-size:.95rem;
    }

    /* ====== Main / Card ====== */
    main{
      min-height: calc(100% - 120px);
      display:grid; place-items:center; padding: 32px 16px 40px;
    }
    .card{
      width: 100%; max-width: 680px;
      background: color-mix(in srgb, var(--card) 85%, #fff 15%);
      backdrop-filter: saturate(1.1) blur(2px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(16,198,209,.10);
      overflow: clip;
      transition: box-shadow .25s ease, transform .25s ease;
    }
    .card:hover{ box-shadow: var(--shadow-strong); transform: translateY(-2px); }

    .card-head{
      padding: 18px 22px;
      background: linear-gradient(180deg, rgba(16,198,209,.10), transparent);
      border-bottom: 1px solid rgba(16,198,209,.12);
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap: wrap;
    }
    .card-head h2{ margin:0; font-size:1.1rem; color:#0f172a; }
    .badge{
      background: rgba(255,127,17,.12);
      color: #4a2a06;
      border: 1px solid rgba(255,127,17,.35);
      padding: 6px 10px; border-radius: 999px; font-weight: 700; font-size:.8rem;
    }

    form{ padding: 22px; }
    .grid{
      display:grid; gap: 16px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 620px){
      .grid{ grid-template-columns: 1fr 1fr; }
      .grid .full{ grid-column: 1 / -1; }
    }

    label{
      font-weight: 700;
      color: #0f172a;
      display:flex; align-items:center; gap:8px; margin-bottom:6px;
    }
    .req::after{
      content: " *";
      color: var(--brand);
      font-weight: 900;
    }

    .control{
      position: relative;
    }
    .control input, .control select{
      width: 100%; appearance: none;
      border: 1px solid #e5e7eb; border-radius: 12px;
      padding: 12px 14px;
      font-size: 1rem; background: #fff;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease, transform .03s ease;
    }
    .control input:focus, .control select:focus{
      border-color: var(--accent-700);
      box-shadow: 0 0 0 4px var(--ring);
    }
    .control input:active, .control select:active{ transform: translateY(0.5px); }

    /* Chevron del select */
    .control.select::after{
      content: "▾";
      position: absolute; right: 12px; top: 50%; translate: 0 -50%;
      pointer-events: none; color: var(--muted);
      font-size: 1rem;
    }

    .hint{
      margin-top: 6px; font-size: .86rem; color: var(--muted);
    }

    button{
      width: 100%;
      border: 0; border-radius: 14px;
      padding: 14px 16px; font-size: 1.05rem; font-weight: 800;
      cursor:pointer; letter-spacing:.2px;
      color: white;
      background: linear-gradient(135deg, var(--brand) 0%, var(--accent) 100%);
      box-shadow: 0 6px 18px rgba(255,127,17,.25), 0 4px 12px rgba(16,198,209,.18);
      transition: transform .08s ease, filter .2s ease, box-shadow .2s ease;
    }
    button:hover{ filter: brightness(1.02); box-shadow: 0 10px 24px rgba(255,127,17,.25), 0 8px 18px rgba(16,198,209,.22); }
    button:active{ transform: translateY(1px) scale(.997); }
    button:focus-visible{ outline: 0; box-shadow: 0 0 0 4px var(--ring-strong); }

    /* Mensaje */
    #mensaje{
      margin: 4px 22px 22px;
      display:none; border-radius: 12px; padding: 12px 14px; font-weight:700;
    }
    #mensaje.ok{
      display:block; background: rgba(16,198,209,.10); color: #0a5560; border:1px solid rgba(16,198,209,.35);
    }
    #mensaje.err{
      display:block; background: rgba(255,127,17,.12); color: #6d3b09; border:1px solid rgba(255,127,17,.35);
    }

    /* Footer */
    footer{
      text-align:center; padding: 22px 16px; color:#fff;
      background: linear-gradient(135deg, var(--brand) 0%, var(--accent) 100%);
      margin-top: 24px;
    }
    footer small{ opacity:.95; }
  </style>
</head>
<body>
  <header>
    <div class="header-wrap">
      <div class="logo">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Escudo_de_Hermosillo.svg/509px-Escudo_de_Hermosillo.svg.png" alt="Escudo de Hermosillo">
      </div>
      <div class="title-group">
        <h1>Registro de Petición de Refacciones</h1>
        <p>Dirección de Talleres · Municipio de Hermosillo</p>
      </div>
    </div>
  </header>

  <main>
    <section class="card" aria-labelledby="form-title">
      <div class="card-head">
        <h2 id="form-title">Captura rápida</h2>
        <span class="badge">Direccion de Talleres</span>
      </div>

      <form id="formulario_pet" novalidate>
        <div class="grid">
          <div class="control">
            <label for="unidad" class="req">Unidad</label>
            <input type="text" id="unidad" name="unidad" inputmode="numeric" pattern="\d+" title="Solo números" placeholder="Ej. 01535" required />
            <div class="hint">Solo números (ej. 01535)</div>
          </div>

          <div class="control select">
            <label for="tipo_equipo" class="req">Area</label>
            <select id="tipo_equipo" name="tipo_equipo" required>
              <option value="">Seleccione…</option>
              <option>Maquinaria Pesada</option>
              <option>Gasolina</option>
              <option>Eléctricas</option>
              <option>Colectores</option>
              <option>Soldadura</option>
              <option>Motos</option>
              <option>Infraestructura</option>
              <option>Otros</option>
            </select>
          </div>

          <div class="control full">
            <label for="peticion" class="req">Petición</label>
            <input type="text" id="peticion" name="peticion" placeholder="Ej. Filtro de aire #00000" required />
          </div>

          <div class="control">
            <label for="solicita" class="req">¿Quién Solicita?</label>
            <input type="text" id="solicita" name="solicita" placeholder="Nombre del mecanico" required />
          </div>

          <div class="control">
            <label for="motor" class="req">¿Tipo de Motor?</label>
            <input type="text" id="motor" name="motor" placeholder="Ej. QSB 4.5, V6 4.3, etc." required />
          </div>

          <div class="control select">
            <label for="muestra" class="req">¿Se deja muestra?</label>
            <select id="muestra" name="muestra" required>
              <option value="">Seleccione…</option>
              <option>Sí</option>
              <option>No</option>
            </select>
          </div>
        </div>

        <div class="control full" style="margin-top:10px;">
          <button type="submit" aria-label="Enviar Pedido">Enviar Pedido</button>
        </div>
      </form>

      <div id="mensaje" role="status" aria-live="polite"></div>
    </section>
  </main>

  <footer>
    <small>&copy; 2024 Dirección de Talleres · Municipio de Hermosillo</small>
  </footer>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbyXiX0JL0piztXjxn20i76bY4emOGZ8CG8O6EwPpzh-O5wcySx_LOH0x_HTSxaklaKO/exec';
    const form = document.getElementById('formulario_pet');
    const mensaje = document.getElementById('mensaje');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Validación nativa: si falla, mostramos un tono consistente
      if(!form.checkValidity()){
        mensaje.className = 'err';
        mensaje.textContent = 'Revisa los campos obligatorios marcados con *';
        return;
      }

      const formData = new FormData(form);

      try {
        const response = await fetch(scriptURL, { method: 'POST', body: formData });
        const result = await response.json();

        mensaje.className = 'ok';
        mensaje.textContent = result.message || 'Registro enviado correctamente.';
        form.reset();

        setTimeout(() => { mensaje.className = ''; mensaje.textContent = ''; }, 5000);

      } catch (error) {
        mensaje.className = 'err';
        mensaje.textContent = 'Ocurrió un problema al enviar los datos. Intenta nuevamente.';
      }
    });
  </script>
</body>
</html>
